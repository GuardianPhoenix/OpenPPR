<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Penetration Testing Checklist</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.4.0/dist/jspdf.umd.min.js"></script>
  <style>
    body {
      padding-top: 56px;
    }
    .checklist-section {
      margin-bottom: 30px;
    }
    .progress-container {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">PenTest Checklist</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item"><a class="nav-link" href="#pre-engagement">Pre-Engagement</a></li>
          <li class="nav-item"><a class="nav-link" href="#info-gathering">Information Gathering</a></li>
          <li class="nav-item"><a class="nav-link" href="#vuln-analysis">Vulnerability Analysis</a></li>
          <li class="nav-item"><a class="nav-link" href="#reporting">Reporting</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container">
    <header class="my-5">
      <h1 class="text-center">Penetration Testing Checklist</h1>
      <p class="text-center">A comprehensive checklist to guide your penetration testing process.</p>
      <input id="search" type="text" class="form-control" placeholder="Search checklist...">
    </header>

    <div class="progress-container">
      <h3>Progress</h3>
      <div class="progress">
        <div id="progress-bar" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
    </div>

    <!-- Pre-Engagement Section -->
    <section id="pre-engagement" class="checklist-section">
      <h2>Pre-Engagement</h2>
      <ul class="list-group">
        <li class="list-group-item">
          <input type="checkbox" id="nda" class="form-check-input me-2" />
          <label for="nda">Secure a Non-Disclosure Agreement (NDA).</label>
        </li>
        <li class="list-group-item">
          <input type="checkbox" id="authorization" class="form-check-input me-2" />
          <label for="authorization">Obtain formal, written authorization for testing.</label>
        </li>
        <li class="list-group-item">
          <input type="checkbox" id="legal-compliance" class="form-check-input me-2" />
          <label for="legal-compliance">Ensure legal compliance with all relevant laws and regulations.</label>
        </li>
      </ul>
    </section>

    <!-- Information Gathering Section -->
    <section id="info-gathering" class="checklist-section">
      <h2>Information Gathering</h2>
      <ul class="list-group">
        <li class="list-group-item">
          <input type="checkbox" id="whois" class="form-check-input me-2" />
          <label for="whois">Perform WHOIS lookups and analyze domain registration information.</label>
        </li>
        <li class="list-group-item">
          <input type="checkbox" id="osint" class="form-check-input me-2" />
          <label for="osint">Utilize Open Source Intelligence (OSINT) techniques.</label>
        </li>
        <li class="list-group-item">
          <input type="checkbox" id="dns-analysis" class="form-check-input me-2" />
          <label for="dns-analysis">Conduct DNS analysis and enumerate subdomains.</label>
        </li>
      </ul>
    </section>

    <!-- Vulnerability Analysis Section -->
    <section id="vuln-analysis" class="checklist-section">
      <h2>Vulnerability Analysis</h2>
      <ul class="list-group">
        <li class="list-group-item">
          <input type="checkbox" id="sql-injection" class="form-check-input me-2" />
          <label for="sql-injection">Analyze applications for SQL Injection vulnerabilities.</label>
        </li>
        <li class="list-group-item">
          <input type="checkbox" id="xss" class="form-check-input me-2" />
          <label for="xss">Analyze applications for Cross-Site Scripting (XSS).</label>
        </li>
        <li class="list-group-item">
          <input type="checkbox" id="csrf" class="form-check-input me-2" />
          <label for="csrf">Analyze applications for Cross-Site Request Forgery (CSRF).</label>
        </li>
      </ul>
    </section>

    <!-- Reporting Section -->
    <section id="reporting" class="checklist-section">
      <h2>Reporting</h2>
      <button class="btn btn-primary" id="generate-pdf">Generate PDF Report</button>
    </section>
  </div>

  <script>
    // Save checklist state in localStorage
    document.querySelectorAll("input[type='checkbox']").forEach(checkbox => {
      checkbox.addEventListener('change', () => {
        localStorage.setItem(checkbox.id, checkbox.checked);
        updateProgress();
      });
      checkbox.checked = localStorage.getItem(checkbox.id) === 'true';
    });

    // Update progress bar
    function updateProgress() {
      const checkboxes = document.querySelectorAll("input[type='checkbox']");
      const checked = document.querySelectorAll("input[type='checkbox']:checked");
      const progress = (checked.length / checkboxes.length) * 100;
      document.getElementById('progress-bar').style.width = progress + "%";
      document.getElementById('progress-bar').setAttribute('aria-valuenow', progress);
    }
    updateProgress();

    // Search filter
    document.getElementById("search").addEventListener("input", function () {
      const searchValue = this.value.toLowerCase();
      document.querySelectorAll("ul.list-group li").forEach((item) => {
        const text = item.innerText.toLowerCase();
        item.style.display = text.includes(searchValue) ? "" : "none";
      });
    });

    // Generate PDF with watermark
    document.getElementById('generate-pdf').addEventListener('click', () => {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      // Add watermark
      const pageWidth = doc.internal.pageSize.getWidth();
      const pageHeight = doc.internal.pageSize.getHeight();
      doc.setFontSize(40);
      doc.setTextColor(150);
      doc.text("CONFIDENTIEL DÃ‰FENSE", pageWidth / 2, pageHeight / 2, {
        angle: 45,
        align: 'center',
      });

      let y = 10;
      const criticalSteps = ["nda", "authorization"];
      const uncompleted = criticalSteps.filter((id) => !document.getElementById(id).checked);

      if (uncompleted.length > 0) {
        alert("Please complete all critical steps before generating the report.");
        return;
      }

      doc.setFontSize(12);
      doc.setTextColor(0);
      doc.text("Penetration Testing Checklist Report", 10, y);
      y += 10;

      document.querySelectorAll("section").forEach(section => {
        const title = section.querySelector("h2").innerText;
        doc.text(title, 10, y);
        y += 10;

        section.querySelectorAll("input[type='checkbox']").forEach(checkbox => {
          const label = checkbox.nextElementSibling.innerText;
          const status = checkbox.checked ? "[X]" : "[ ]";
          doc.text(`${status} ${label}`, 10, y);
          y += 10;
        });
      });

      doc.save("checklist-report.pdf");
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
